<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.triple.mapper.ReviewMapper">
	
	
	<!-- 전체 리뷰 정보 조회 -->
	<select id="getAllReviewInfo" resultType="reviewDto">
		select reviewId, placeId, userId, content, isDeleted, uploadedDate, modifiedDate, deletedDate
		from review
		order by uploadedDate
	</select>
	
	<!-- 특정 리뷰 정보 조회 -->
	<select id="getReviewInfo" parameterType="String" resultType="reviewDto">
		select reviewId, placeId, userId, content, isDeleted, uploadedDate, modifiedDate, deletedDate
		from review
		where reviewId = #{reviewid}
		order by uploadedDate
	</select>
	
	<!-- 특정 장소에 대한 첫 리뷰 조회 -->
	<select id="getPlaceFirstReview" parameterType="String" resultType="reviewDto">
		select reviewId, placeId, userId, content, isDeleted, uploadedDate, modifiedDate, deletedDate
		from review 
		where placeId = #{placeid} and isDeleted = 0
		order by uploadedDate asc 
		limit 1
	</select>
	
</mapper>